'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _immutable = require('immutable');

var _draftJs = require('draft-js');

var _ActionTypes = require('../constants/ActionTypes');

var _isEntityActive = require('../utils/isEntityActive');

var _isEntityActive2 = _interopRequireDefault(_isEntityActive);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var getBlockRenderMap = function getBlockRenderMap(customBlockMap) {
  var customBlockRenderMap = (0, _immutable.Map)(Object.keys(customBlockMap).reduce(function (map, blockName) {
    map[blockName] = {
      element: 'div'
    };
    return map;
  }, {
    // 'paragraph': {
    //   element: 'div',
    // },
    'unstyled': {
      element: 'div'
    },
    'atomic': {
      element: 'div'
    }
  }));
  var mergedRenderMap = _draftJs.DefaultDraftBlockRenderMap.merge(customBlockRenderMap);

  return mergedRenderMap;
};

var getActiveMap = function getActiveMap(_ref) {
  var editorState = _ref.editorState,
      blockNames = _ref.blockNames,
      styleNames = _ref.styleNames,
      decoratorNames = _ref.decoratorNames;

  var selectionState = editorState.getSelection();
  var currentBlockType = editorState.getCurrentContent().getBlockForKey(selectionState.getStartKey()).getType();
  var currentStyleNames = editorState.getCurrentInlineStyle();
  var blockActiveMap = blockNames.reduce(function (map, blockName) {
    map[blockName] = blockName === currentBlockType;
    return map;
  }, {});
  var styleActiveMap = styleNames.reduce(function (map, styleName) {
    map[styleName] = currentStyleNames.has(styleName);
    return map;
  }, {});
  var entityActiveMap = decoratorNames.reduce(function (map, decoratorName) {
    map[decoratorName] = (0, _isEntityActive2.default)(editorState, decoratorName);
    return map;
  }, {});

  return _extends({}, blockActiveMap, styleActiveMap, entityActiveMap);
};

var initialEditorState = {};
var editorReducer = function editorReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialEditorState;
  var action = arguments[1];

  switch (action.type) {
    case _ActionTypes.INIT:
      {
        var config = action.config,
            markInitialized = action.markInitialized;
        var rawContent = config.rawContent,
            _config$customStyleMa = config.customStyleMap,
            customStyleMap = _config$customStyleMa === undefined ? {} : _config$customStyleMa,
            _config$customBlockMa = config.customBlockMap,
            customBlockMap = _config$customBlockMa === undefined ? {} : _config$customBlockMa,
            _config$entityMap = config.entityMap,
            entityMap = _config$entityMap === undefined ? {} : _config$entityMap,
            _config$decoratorMap = config.decoratorMap,
            decoratorMap = _config$decoratorMap === undefined ? {} : _config$decoratorMap,
            _config$renderMap = config.renderMap,
            renderMap = _config$renderMap === undefined ? {} : _config$renderMap;

        var defaultStyleNames = Object.keys(_draftJs.DefaultDraftInlineStyle);
        var styleNames = [].concat(_toConsumableArray(defaultStyleNames), _toConsumableArray(Object.keys(customStyleMap || [])));
        var defaultBlockNames = _draftJs.DefaultDraftBlockRenderMap.keySeq().toArray();
        var editorStateFromRaw = null;

        if (rawContent) {
          editorStateFromRaw = _draftJs.EditorState.createWithContent((0, _draftJs.convertFromRaw)(rawContent));
        }

        var editorState = action.editorState || editorStateFromRaw || _draftJs.EditorState.createEmpty();
        var blockRenderMap = getBlockRenderMap(customBlockMap);
        var blockRendererFn = function blockRendererFn(contentBlock) {
          var name = contentBlock.getType();

          return customBlockMap[name];
        };
        var blockNames = blockRenderMap.keySeq().toArray();
        var entityNames = Object.keys(entityMap);
        var decoratorNames = Object.keys(decoratorMap);
        var decorators = decoratorNames.map(function (decoratorName) {
          return decoratorMap[decoratorName];
        });

        editorState = _draftJs.EditorState.set(editorState, {
          decorator: new _draftJs.CompositeDecorator(decorators)
        });
        return {
          // private redux-draft props
          _instance: null,
          _initialized: markInitialized,

          // public redux-draft props
          name: action.editorName,
          config: config,
          defaultStyleNames: defaultStyleNames,
          styleNames: styleNames,
          defaultBlockNames: defaultBlockNames,
          blockNames: blockNames,
          entityNames: entityNames,
          decoratorNames: decoratorNames,
          decorators: decorators,
          activeMap: getActiveMap({
            editorState: editorState,
            blockNames: blockNames,
            styleNames: styleNames,
            decoratorNames: decoratorNames
          }),
          renderMap: renderMap,

          // draft props
          editorState: editorState,
          customStyleMap: customStyleMap,
          blockRenderMap: blockRenderMap,
          blockRendererFn: blockRendererFn,
          readOnly: false
        };
      }

    case _ActionTypes.SET_REF:
      {
        return _extends({}, state, {
          _instance: action.editorInstance
        });
      }

    case _ActionTypes.UPDATE_EDITOR_STATE:
      {
        var _blockNames = state.blockNames,
            _styleNames = state.styleNames,
            _decoratorNames = state.decoratorNames;
        var _editorState = action.editorState;


        return _extends({}, state, {
          editorState: _editorState,
          activeMap: getActiveMap({
            editorState: _editorState,
            blockNames: _blockNames,
            styleNames: _styleNames,
            decoratorNames: _decoratorNames
          })
        });
      }

    case _ActionTypes.UPDATE_EDITOR_STATE_FROM_RAW:
      {
        var _blockNames2 = state.blockNames,
            _styleNames2 = state.styleNames,
            _decoratorNames2 = state.decoratorNames,
            _decorators = state.decorators;
        var _rawContent = action.rawContent;

        var contentState = (0, _draftJs.convertFromRaw)(_rawContent);
        var _editorState2 = _draftJs.EditorState.createWithContent(contentState, new _draftJs.CompositeDecorator(_decorators));

        return _extends({}, state, {
          editorState: _editorState2,
          activeMap: getActiveMap({
            editorState: _editorState2,
            blockNames: _blockNames2,
            styleNames: _styleNames2,
            decoratorNames: _decoratorNames2
          })
        });
      }

    case _ActionTypes.UPDATE_READ_ONLY:
      {
        return _extends({}, state, {
          readOnly: action.readOnly
        });
      }

    case _ActionTypes.TOGGLE_BLOCK:
      {
        var _blockNames3 = state.blockNames,
            _styleNames3 = state.styleNames,
            _decoratorNames3 = state.decoratorNames;

        var _editorState3 = _draftJs.RichUtils.toggleBlockType(state.editorState, action.blockName);

        return _extends({}, state, {
          editorState: _editorState3,
          activeMap: getActiveMap({
            editorState: _editorState3,
            blockNames: _blockNames3,
            styleNames: _styleNames3,
            decoratorNames: _decoratorNames3
          })
        });
      }

    case _ActionTypes.TOGGLE_STYLE:
      {
        var _blockNames4 = state.blockNames,
            _styleNames4 = state.styleNames,
            _decoratorNames4 = state.decoratorNames;

        var _editorState4 = _draftJs.RichUtils.toggleInlineStyle(state.editorState, action.styleName);

        return _extends({}, state, {
          editorState: _editorState4,
          activeMap: getActiveMap({
            editorState: _editorState4,
            blockNames: _blockNames4,
            styleNames: _styleNames4,
            decoratorNames: _decoratorNames4
          })
        });
      }

    case _ActionTypes.APPLY_BLOCK:
      {
        var _editorState5 = state.editorState,
            _blockNames5 = state.blockNames,
            _styleNames5 = state.styleNames,
            _decoratorNames5 = state.decoratorNames;

        var _contentState = _editorState5.getCurrentContent();
        var selectionState = _editorState5.getSelection();
        var setBlock = _draftJs.Modifier.setBlockType(_contentState, selectionState, action.blockName);

        _contentState = _draftJs.EditorState.push(_editorState5, setBlock, 'change-block-type');
        _editorState5 = _draftJs.EditorState.forceSelection(_contentState, setBlock.getSelectionAfter());
        return _extends({}, state, {
          editorState: _editorState5,
          activeMap: getActiveMap({
            editorState: _editorState5,
            blockNames: _blockNames5,
            styleNames: _styleNames5,
            decoratorNames: _decoratorNames5
          })
        });
      }

    case _ActionTypes.REMOVE_ENTITY:
      {
        var _editorState6 = state.editorState,
            _blockNames6 = state.blockNames,
            _styleNames6 = state.styleNames,
            _decoratorNames6 = state.decoratorNames;

        var _selectionState = _editorState6.getSelection();
        var _contentState2 = _editorState6.getCurrentContent();
        var contentStateWithoutEntity = _draftJs.Modifier.applyEntity(_contentState2, _selectionState, null);
        _editorState6 = _draftJs.EditorState.push(_editorState6, contentStateWithoutEntity, 'apply-entity');

        return _extends({}, state, {
          editorState: _editorState6,
          activeMap: getActiveMap({
            editorState: _editorState6,
            blockNames: _blockNames6,
            styleNames: _styleNames6,
            decoratorNames: _decoratorNames6
          })
        });
      }

    case _ActionTypes.APPLY_ENTITY:
      {
        var _editorState7 = state.editorState,
            _blockNames7 = state.blockNames,
            _styleNames7 = state.styleNames,
            _decoratorNames7 = state.decoratorNames;

        var _selectionState2 = _editorState7.getSelection();
        var _contentState3 = _editorState7.getCurrentContent();

        var contentStateWithNewEntity = _contentState3.createEntity(action.entityName, action.mutability, action.data);
        var entityKey = contentStateWithNewEntity.getLastCreatedEntityKey();
        var contentStateWithEntity = _draftJs.Modifier.applyEntity(contentStateWithNewEntity, _selectionState2, entityKey);
        _editorState7 = _draftJs.EditorState.push(_editorState7, contentStateWithEntity, 'apply-entity');

        return _extends({}, state, {
          editorState: _editorState7,
          activeMap: getActiveMap({
            editorState: _editorState7,
            blockNames: _blockNames7,
            styleNames: _styleNames7,
            decoratorNames: _decoratorNames7
          })
        });
      }

    case _ActionTypes.INSERT_ENTITY:
      {
        var _editorState8 = state.editorState,
            _blockNames8 = state.blockNames,
            _styleNames8 = state.styleNames,
            _decoratorNames8 = state.decoratorNames;

        var _selectionState3 = _editorState8.getSelection();
        var _contentState4 = _editorState8.getCurrentContent();

        var _contentStateWithNewEntity = _contentState4.createEntity(action.entityName, action.mutability, action.data);
        var _entityKey = _contentStateWithNewEntity.getLastCreatedEntityKey();

        var firstBlank = _draftJs.Modifier.insertText(_contentState4, _selectionState3, ' ', null, null);
        var withEntity = _draftJs.Modifier.insertText(firstBlank, _selectionState3, action.text, null, _entityKey);
        var withBlank = _draftJs.Modifier.insertText(withEntity, _selectionState3, ' ', null, null);

        _editorState8 = _draftJs.EditorState.push(_editorState8, withBlank, 'insert-text');

        return _extends({}, state, {
          editorState: _editorState8,
          activeMap: getActiveMap({
            editorState: _editorState8,
            blockNames: _blockNames8,
            styleNames: _styleNames8,
            decoratorNames: _decoratorNames8
          })
        });
      }

    case _ActionTypes.INSERT_ATOMIC_BLOCK:
      {
        var _editorState9 = state.editorState,
            _blockNames9 = state.blockNames,
            _styleNames9 = state.styleNames,
            _decoratorNames9 = state.decoratorNames;

        var _contentState5 = _editorState9.getCurrentContent();
        var _contentStateWithNewEntity2 = _contentState5.createEntity(action.entityName, action.mutability, action.data);
        var _entityKey2 = _contentStateWithNewEntity2.getLastCreatedEntityKey();

        _editorState9 = _draftJs.EditorState.set(_editorState9, { currentContent: _contentStateWithNewEntity2 });
        _editorState9 = _draftJs.AtomicBlockUtils.insertAtomicBlock(_editorState9, _entityKey2, action.text);
        return _extends({}, state, {
          editorState: _editorState9,
          activeMap: getActiveMap({
            editorState: _editorState9,
            blockNames: _blockNames9,
            styleNames: _styleNames9,
            decoratorNames: _decoratorNames9
          })
        });
      }

    case _ActionTypes.REMOVE_BLOCK:
      {
        var _editorState10 = state.editorState;

        var _contentState6 = _editorState10.getCurrentContent();
        var block = _contentState6.getBlockForKey(action.blockKey);
        var targetRange = new _draftJs.SelectionState({
          anchorKey: action.blockKey,
          anchorOffset: 0,
          focusKey: action.blockKey,
          focusOffset: block.getLength()
        });
        var withoutBlock = _draftJs.Modifier.removeRange(_contentState6, targetRange, 'backward');
        var resetBlock = _draftJs.Modifier.setBlockType(withoutBlock, withoutBlock.getSelectionAfter(), 'unstyled');

        _contentState6 = _draftJs.EditorState.push(_editorState10, resetBlock, 'remove-range');
        _editorState10 = _draftJs.EditorState.forceSelection(_contentState6, resetBlock.getSelectionAfter());
        return _extends({}, state, {
          editorState: _editorState10
        });
      }

    case _ActionTypes.UPDATE_ENTITY_DATA:
      {
        var _editorState11 = state.editorState,
            _decorators2 = state.decorators;

        var _contentState7 = _editorState11.getCurrentContent();
        _contentState7 = _contentState7.mergeEntityData(action.entityKey, action.data);
        _editorState11 = _draftJs.EditorState.createWithContent(_contentState7, new _draftJs.CompositeDecorator(_decorators2));

        return _extends({}, state, {
          editorState: _editorState11
        });
      }
  }
};

var initialState = {};

exports.default = function () {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments[1];
  var editorName = action.editorName;


  if (editorName) {
    return _extends({}, state, _defineProperty({}, editorName, editorReducer(state[editorName], action)));
  } else {
    return state;
  }
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZHVjZXJzL2luZGV4LmpzIl0sIm5hbWVzIjpbImdldEJsb2NrUmVuZGVyTWFwIiwiY3VzdG9tQmxvY2tNYXAiLCJjdXN0b21CbG9ja1JlbmRlck1hcCIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJtYXAiLCJibG9ja05hbWUiLCJlbGVtZW50IiwibWVyZ2VkUmVuZGVyTWFwIiwibWVyZ2UiLCJnZXRBY3RpdmVNYXAiLCJlZGl0b3JTdGF0ZSIsImJsb2NrTmFtZXMiLCJzdHlsZU5hbWVzIiwiZGVjb3JhdG9yTmFtZXMiLCJzZWxlY3Rpb25TdGF0ZSIsImdldFNlbGVjdGlvbiIsImN1cnJlbnRCbG9ja1R5cGUiLCJnZXRDdXJyZW50Q29udGVudCIsImdldEJsb2NrRm9yS2V5IiwiZ2V0U3RhcnRLZXkiLCJnZXRUeXBlIiwiY3VycmVudFN0eWxlTmFtZXMiLCJnZXRDdXJyZW50SW5saW5lU3R5bGUiLCJibG9ja0FjdGl2ZU1hcCIsInN0eWxlQWN0aXZlTWFwIiwic3R5bGVOYW1lIiwiaGFzIiwiZW50aXR5QWN0aXZlTWFwIiwiZGVjb3JhdG9yTmFtZSIsImluaXRpYWxFZGl0b3JTdGF0ZSIsImVkaXRvclJlZHVjZXIiLCJzdGF0ZSIsImFjdGlvbiIsInR5cGUiLCJjb25maWciLCJtYXJrSW5pdGlhbGl6ZWQiLCJyYXdDb250ZW50IiwiY3VzdG9tU3R5bGVNYXAiLCJlbnRpdHlNYXAiLCJkZWNvcmF0b3JNYXAiLCJyZW5kZXJNYXAiLCJkZWZhdWx0U3R5bGVOYW1lcyIsImRlZmF1bHRCbG9ja05hbWVzIiwia2V5U2VxIiwidG9BcnJheSIsImVkaXRvclN0YXRlRnJvbVJhdyIsImNyZWF0ZVdpdGhDb250ZW50IiwiY3JlYXRlRW1wdHkiLCJibG9ja1JlbmRlck1hcCIsImJsb2NrUmVuZGVyZXJGbiIsImNvbnRlbnRCbG9jayIsIm5hbWUiLCJlbnRpdHlOYW1lcyIsImRlY29yYXRvcnMiLCJzZXQiLCJkZWNvcmF0b3IiLCJfaW5zdGFuY2UiLCJfaW5pdGlhbGl6ZWQiLCJlZGl0b3JOYW1lIiwiYWN0aXZlTWFwIiwicmVhZE9ubHkiLCJlZGl0b3JJbnN0YW5jZSIsImNvbnRlbnRTdGF0ZSIsInRvZ2dsZUJsb2NrVHlwZSIsInRvZ2dsZUlubGluZVN0eWxlIiwic2V0QmxvY2siLCJzZXRCbG9ja1R5cGUiLCJwdXNoIiwiZm9yY2VTZWxlY3Rpb24iLCJnZXRTZWxlY3Rpb25BZnRlciIsImNvbnRlbnRTdGF0ZVdpdGhvdXRFbnRpdHkiLCJhcHBseUVudGl0eSIsImNvbnRlbnRTdGF0ZVdpdGhOZXdFbnRpdHkiLCJjcmVhdGVFbnRpdHkiLCJlbnRpdHlOYW1lIiwibXV0YWJpbGl0eSIsImRhdGEiLCJlbnRpdHlLZXkiLCJnZXRMYXN0Q3JlYXRlZEVudGl0eUtleSIsImNvbnRlbnRTdGF0ZVdpdGhFbnRpdHkiLCJmaXJzdEJsYW5rIiwiaW5zZXJ0VGV4dCIsIndpdGhFbnRpdHkiLCJ0ZXh0Iiwid2l0aEJsYW5rIiwiY3VycmVudENvbnRlbnQiLCJpbnNlcnRBdG9taWNCbG9jayIsImJsb2NrIiwiYmxvY2tLZXkiLCJ0YXJnZXRSYW5nZSIsImFuY2hvcktleSIsImFuY2hvck9mZnNldCIsImZvY3VzS2V5IiwiZm9jdXNPZmZzZXQiLCJnZXRMZW5ndGgiLCJ3aXRob3V0QmxvY2siLCJyZW1vdmVSYW5nZSIsInJlc2V0QmxvY2siLCJtZXJnZUVudGl0eURhdGEiLCJpbml0aWFsU3RhdGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBV0E7O0FBZ0JBOzs7Ozs7Ozs7O0FBRUEsSUFBSUEsb0JBQW9CLFNBQXBCQSxpQkFBb0IsQ0FBQ0MsY0FBRCxFQUFvQjtBQUMxQyxNQUFJQyx1QkFBdUIsb0JBQUlDLE9BQzVCQyxJQUQ0QixDQUN2QkgsY0FEdUIsRUFFNUJJLE1BRjRCLENBRXJCLFVBQUNDLEdBQUQsRUFBTUMsU0FBTixFQUFvQjtBQUMxQkQsUUFBSUMsU0FBSixJQUFpQjtBQUNmQyxlQUFTO0FBRE0sS0FBakI7QUFHQSxXQUFPRixHQUFQO0FBQ0Qs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eUJBQWUscUJBQVlLLElBQVosQ0FBaUJ6RCxjQUFqQixFQUE4QnVGLFVBQTlCLEVBQTBDLGNBQTFDLENBQWY7QUFDQXZGLHlCQUFjLHFCQUFZMEQsY0FBWixDQUNaTixjQURZLEVBQ0VtQyxXQUFXNUIsaUJBQVgsRUFERixDQUFkO0FBR0EsNEJBQ0t0QyxLQURMO0FBRUVyQjtBQUZGO0FBSUQ7O0FBRUQ7QUFBeUI7QUFBQSxZQUNqQkEsY0FEaUIsR0FDV3FCLEtBRFgsQ0FDakJyQixXQURpQjtBQUFBLFlBQ0oyQyxZQURJLEdBQ1d0QixLQURYLENBQ0pzQixVQURJOztBQUV2QixZQUFJUyxpQkFBZXBELGVBQVlPLGlCQUFaLEVBQW5CO0FBQ0E2Qyx5QkFBZUEsZUFBYW9DLGVBQWIsQ0FDYmxFLE9BQU82QyxTQURNLEVBRWI3QyxPQUFPNEMsSUFGTSxDQUFmO0FBSUFsRSx5QkFBYyxxQkFBWW9DLGlCQUFaLENBQ1pnQixjQURZLEVBRVosZ0NBQXVCVCxZQUF2QixDQUZZLENBQWQ7O0FBS0EsNEJBQ0t0QixLQURMO0FBRUVyQjtBQUZGO0FBSUQ7QUFsYkg7QUFvYkQsQ0FyYkQ7O0FBdWJBLElBQUl5RixlQUFlLEVBQW5COztrQkFFZSxZQUFrQztBQUFBLE1BQWpDcEUsS0FBaUMsdUVBQXpCb0UsWUFBeUI7QUFBQSxNQUFYbkUsTUFBVztBQUFBLE1BQ3pDMEIsVUFEeUMsR0FDMUIxQixNQUQwQixDQUN6QzBCLFVBRHlDOzs7QUFHL0MsTUFBSUEsVUFBSixFQUFnQjtBQUNkLHdCQUNLM0IsS0FETCxzQkFFRzJCLFVBRkgsRUFFZ0I1QixjQUFjQyxNQUFNMkIsVUFBTixDQUFkLEVBQWlDMUIsTUFBakMsQ0FGaEI7QUFJRCxHQUxELE1BS087QUFDTCxXQUFPRCxLQUFQO0FBQ0Q7QUFDRixDIiwiZmlsZSI6InJlZHVjZXJzL2luZGV4LmpzIiwic291cmNlUm9vdCI6IkU6XFxwcm9qZWN0c1xccmVkdXgtZHJhZnRcXHNyYyJ9
